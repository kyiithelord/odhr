<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <!-- Record Rules: Self-service vs Manager vs HR -->
  <!-- Self-service: employees can see their own compliance documents -->
  <record id="odhr_rule_compliance_self" model="ir.rule">
    <field name="name">Compliance Documents: Self</field>
    <field name="model_id" ref="model_odhr_compliance_document"/>
    <field name="domain_force">[("employee_id.user_id", "=", user.id)]</field>
    <field name="groups" eval="[(4, ref('base.group_user'))]"/>
  </record>

  <!-- Self-service: employees can see their own onboarding checklist and tasks -->
  <record id="odhr_rule_onboarding_checklist_self" model="ir.rule">
    <field name="name">Onboarding Checklist: Self</field>
    <field name="model_id" ref="model_odhr_onboarding_checklist"/>
    <field name="domain_force">[("employee_id.user_id", "=", user.id)]</field>
    <field name="groups" eval="[(4, ref('base.group_user'))]"/>
  </record>

  <record id="odhr_rule_onboarding_task_self" model="ir.rule">
    <field name="name">Onboarding Task: Self</field>
    <field name="model_id" ref="model_odhr_onboarding_task"/>
    <field name="domain_force">[("checklist_id.employee_id.user_id", "=", user.id)]</field>
    <field name="groups" eval="[(4, ref('base.group_user'))]"/>
  </record>

  <!-- HR Users/Managers inherit broader access via groups and ACLs; no extra rule needed here -->
</odoo>
